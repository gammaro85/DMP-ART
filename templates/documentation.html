<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation - DMP ART</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script>
        // Prevent flash of wrong theme
        (function() {
            const savedTheme = localStorage.getItem('dmp-art-theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = savedTheme || (prefersDark ? 'dark' : 'light');
            document.documentElement.setAttribute('data-theme', theme);
        })();
    </script>
    <style>
        :root {
            /* ...remove or override local variables, rely on style.css... */
        }
        [data-theme="dark"] {
            /* ...remove or override local variables, rely on style.css... */
        }
        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: background 0.2s, color 0.2s;
        }
        .container {
            background: var(--bg-card);
            color: var(--text-primary);
        }
        .about-container,
        .intro-section, .technical-section, .data-sources-section, 
        .limitations-section, .getting-started-section {
            background: var(--bg-card);
            color: var(--text-primary);
            box-shadow: var(--shadow);
        }
        .features-section {
            background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-card) 100%);
        }
        .feature-card {
            background: var(--bg-card);
            color: var(--text-primary);
            box-shadow: var(--shadow);
        }
        .limitation-card {
            background: #fff3cd;
            color: #856404;
        }
        [data-theme="dark"] .limitation-card {
            background: #3d3a1e;
            color: #ffeaa7;
            border-color: #ffeaa7;
        }
        .step-card {
            background: var(--bg-alt);
            color: var(--text-primary);
        }
        .footer-content {
            background: var(--bg-alt);
            color: var(--text-secondary);
        }
        .primary-btn, .secondary-btn {
            transition: background 0.2s, color 0.2s;
        }
        .primary-btn {
            background: var(--primary-color);
            color: #fff;
        }
        .secondary-btn {
            background: var(--secondary-color);
            color: #fff;
        }
        .primary-btn:hover, .secondary-btn:hover {
            opacity: 0.85;
        }
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--bg-alt);
            color: var(--text-main);
            border: 1px solid var(--secondary-color);
            border-radius: 50px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-size: 0.9rem;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: background 0.2s, color 0.2s;
        }
        .theme-toggle:hover {
            background: var(--secondary-color);
            color: #fff;
        }
        @media (max-width: 768px) {
            .about-container {
                padding: 1rem 0;
            }
            .intro-section, .technical-section, .data-sources-section, 
            .limitations-section, .getting-started-section, .features-section {
                padding: 1.5rem;
                margin-bottom: 2rem;
            }
            .features-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            .steps-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            .theme-toggle {
                position: relative;
                top: auto;
                right: auto;
                margin-bottom: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="theme-toggle" onclick="toggleTheme()">
        <span id="theme-icon"></span>
        <span id="theme-text">Dark Mode</span>
    </div>
    <div class="container">
        <header>
            <h1>DMP ART Documentation</h1>
            <p style="font-size: 1rem; margin-top: 0.5rem;">Data Management Plan Assessment and Response Tool</p>
        </header>
        
        <main>
            <div class="about-container">
                <section class="intro-section">
                    <h2>What is DMP ART?</h2>
                    <p>DMP ART (Data Management Plan Assessment and Response Tool) is a specialized web application designed to assist with the assessment of Data Management Plans (DMPs) from grant proposals submitted to the National Science Centre (NCN) through the OSF system.</p>
                    <p>This tool supports research administrators and grant officers at Polish institutions by extracting DMP content from OSF-exported PDF documents and providing a structured review interface with standardized feedback capabilities.</p>
                </section>

                <section class="features-section">
                    <h2>Key Features</h2>
                    <div class="features-grid">
                        <div class="feature-card">
                        <h3>DOCX & PDF Support</h3>
                            <p>Advanced processing for both DOCX and PDF files with table content extraction. Supports complex document structures including tables, formatted text, and mixed content layouts.</p>
                        </div>
                        
                        <div class="feature-card">
                            <h3>Smart Tagging</h3>
                            <p>Automatic identification of key concepts and methodology elements. The system recognizes data management terminology and tags content for easier review and feedback.</p>
                        </div>
                        
                        <div class="feature-card">
                            <h3>Quick Feedback</h3>
                            <p>Pre-built comment templates and customizable feedback tools. Streamline your review process with standardized comments and personalized feedback templates.</p>
                        </div>
                        
                        <div class="feature-card">
                            <h3>Dark Mode</h3>
                            <p>Eye-friendly dark theme with automatic system detection. Comfortable viewing experience that adapts to your system preferences and reduces eye strain during long review sessions.</p>
                        </div>
                    </div>
                </section>

                <section class="technical-section">
                    <h2>Technical Capabilities</h2>
                    <div class="capabilities-list">
                        <h3>Document Processing</h3>
                        <ul>
                            <li><strong>Enhanced DOCX Processing:</strong> Table structure recognition, formatting preservation (bold/underlined text), and comprehensive content extraction</li>
                            <li><strong>PDF Text Extraction:</strong> Multi-page PDF processing with section identification and content organization</li>
                            <li><strong>Bilingual Support:</strong> Handles both Polish and English DMP sections with automatic language detection</li>
                        </ul>

                        <h3>Content Analysis</h3>
                        <ul>
                            <li><strong>Section Recognition:</strong> Automatic identification of DMP sections (1.1, 1.2, 2.1, etc.) using pattern matching</li>
                            <li><strong>Key Phrase Detection:</strong> Identifies methodology, data formats, storage, security, and other DMP-related concepts</li>
                            <li><strong>Content Tagging:</strong> Tags paragraphs with relevant categories for streamlined review</li>
                        </ul>

                        <h3>Review Interface</h3>
                        <ul>
                            <li><strong>Progress Tracking:</strong> Visual progress indicators and section navigation</li>
                            <li><strong>Customizable Templates:</strong> Editable feedback templates for consistent reviews</li>
                            <li><strong>Export Options:</strong> Multiple export formats including TXT, HTML, and structured reports</li>
                        </ul>
                    </div>
                </section>

                <section class="data-sources-section">
                    <h2>Data Sources Used</h2>
                    <p>Based on the system architecture, DMP ART processes the following data sources:</p>
                    
                    <h3>From DOCX Files:</h3>
                    <ul>
                        <li><strong>Document Paragraphs:</strong> Text content with formatting detection (lines 89-95 in extractor.py)</li>
                        <li><strong>Table Cells:</strong> Content extracted from table structures (lines 97-125 in extractor.py)</li>
                        <li><strong>Text Runs:</strong> Formatting information including bold and underlined text (lines 243-265 in extractor.py)</li>
                        <li><strong>Document Metadata:</strong> Author extraction using patterns from lines 195-205 in extractor.py</li>
                    </ul>

                    <h3>Configuration Data:</h3>
                    <ul>
                        <li><strong>DMP Structure:</strong> Section definitions from config/dmp_structure.json (lines 1-26)</li>
                        <li><strong>Key Phrases:</strong> Tagging vocabulary from config/key_phrases.json and enhanced version (165+ key terms)</li>
                        <li><strong>Section Mapping:</strong> Bilingual Polish-English mapping from lines 28-85 in extractor.py</li>
                    </ul>

                    <h3>Template Data:</h3>
                    <ul>
                        <li><strong>Feedback Templates:</strong> 14 standardized templates (sections 1.1-6.2) from app.py lines 17-80</li>
                        <li><strong>Common Comments:</strong> 16+ predefined feedback comments from app.py lines 83-105</li>
                    </ul>
                </section>

                <section class="limitations-section">
                    <h2>Current Limitations</h2>
                    <div class="limitation-card">
                        <h3>⚠️ Alpha Version Notice</h3>
                        <p>DMP ART is currently in alpha stage (version 0.5) with the following limitations:</p>
                        <ul>
                            <li><strong>NCN/OSF Specific:</strong> Designed specifically for NCN grant proposals from Polish OSF system</li>
                            <li><strong>Extraction Reliability:</strong> Text recognition varies with document complexity and formatting</li>
                            <li><strong>Manual Review Required:</strong> Extracted content should be verified against original documents</li>
                            <li><strong>File Size Limit:</strong> 16MB maximum file size for uploads</li>
                            <li><strong>Language Constraints:</strong> Optimized for Polish/English bilingual content</li>
                        </ul>
                    </div>
                </section>

                <section class="getting-started-section">
                    <h2>Getting Started</h2>
                    <div class="steps-grid">
                        <div class="step-card">
                            <div class="step-number">1</div>
                            <h3>Upload Document</h3>
                            <p>Upload your NCN grant proposal PDF or DOCX file (max 16MB)</p>
                        </div>
                        
                        <div class="step-card">
                            <div class="step-number">2</div>
                            <h3>Review Extraction</h3>
                            <p>Review the automatically extracted DMP content and tagged sections</p>
                        </div>
                        
                        <div class="step-card">
                            <div class="step-number">3</div>
                            <h3>Provide Feedback</h3>
                            <p>Use templates and quick comments to provide structured feedback</p>
                        </div>
                        
                        <div class="step-card">
                            <div class="step-number">4</div>
                            <h3>Export Results</h3>
                            <p>Compile and download your feedback report in multiple formats</p>
                        </div>
                    </div>
                </section>
            </div>
            
            <div class="action-buttons">
                <a href="/" class="primary-btn">Start Using DMP ART</a>
                <a href="/template_editor" class="secondary-btn">Customize Templates</a>
            </div>
        </main>
        
        <footer>
            <div class="footer-content">
                <div class="footer-main">
                    <p>DMP ART &copy; 2025</p>
                </div>
                <div class="footer-links">
                    <a href="/template_editor" class="footer-link secondary-btn" style="margin: 0;">Customize Templates</a>
                    <span class="footer-link current-page secondary-btn" style="margin: 0; cursor: default;">Documentation</span>
                </div>
            </div>
        </footer>
    </div>
    
    <script>
        // Theme toggle logic
        (function() {
            const root = document.documentElement;
            const themeToggle = () => {
                const current = root.getAttribute('data-theme');
                const next = current === 'dark' ? 'light' : 'dark';
                root.setAttribute('data-theme', next);
                localStorage.setItem('dmp-art-theme', next);
                updateThemeToggle(next === 'dark');
            };
            window.toggleTheme = themeToggle;
            function updateThemeToggle(isDark) {
                const icon = document.getElementById('theme-icon');
                const text = document.getElementById('theme-text');
                if (icon && text) {
                    if (isDark) {
                        icon.textContent = '⚪';
                        text.textContent = 'Light Mode';
                    } else {
                        icon.textContent = '⚫';
                        text.textContent = 'Dark Mode';
                    }
                }
            }
            // Set theme on load
            const saved = localStorage.getItem('dmp-art-theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = saved || (prefersDark ? 'dark' : 'light');
            root.setAttribute('data-theme', theme);
            updateThemeToggle(theme === 'dark');
            // Listen for system changes if no saved theme
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                if (!localStorage.getItem('dmp-art-theme')) {
                    const newTheme = e.matches ? 'dark' : 'light';
                    root.setAttribute('data-theme', newTheme);
                    updateThemeToggle(newTheme === 'dark');
                }
            });
        })();
    </script>
</body>
</html>